<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Dict√©es ‚Äì La Fontaine</title>
  <style>
    body {
      background: linear-gradient(270deg, #8e44ad, #3498db);
      background-size: 600% 600%;
      animation: gradientBG 15s ease infinite;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      color: #fff;
    }

    @keyframes gradientBG {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    .container {
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
      padding: 30px;
      border-radius: 20px;
      max-width: 800px;
      width: 90%;
      text-align: center;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 20px;
    }

    textarea {
      width: 100%;
      height: 200px;
      padding: 15px;
      font-size: 1.1rem;
      border-radius: 8px;
      border: none;
      resize: vertical;
      outline: none;
      margin-bottom: 15px;
    }

    .buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }

    button {
      padding: 10px 20px;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      background: #fff;
      color: #3498db;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background: #3498db;
      color: #fff;
    }

    #feedback {
      margin-top: 20px;
      font-weight: bold;
      font-size: 1.1rem;
      white-space: pre-line;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Dict√©es ‚Äì Fables de La Fontaine</h1>
    <div>
      <label for="dictationSelect">Choisissez une dict√©e :</label>
      <select id="dictationSelect">
        <option value="0">Dict√©e 1 ‚Äì Le Laboureur et ses enfants</option>
        <option value="1">Dict√©e 2 ‚Äì La Cigale et la Fourmi</option>
      </select>
    </div>
    <br>
    <textarea id="userInput" placeholder="Recopiez la dict√©e ici apr√®s l'√©coute..."></textarea>
    <div class="buttons">
      <button id="btnPlay">‚ñ∂Ô∏è √âcouter</button>
      <button id="btnSlow">üê¢ Ralentir</button>
      <button id="btnFast">üêá Acc√©l√©rer</button>
      <button id="btnCheck">‚úÖ Corriger</button>
    </div>
    <div id="feedback"></div>
  </div>

  <script>
    const dictations = [
      {
        title: "Le Laboureur et ses enfants",
        text: [
          "Travaillez, prenez de la peine : C'est le fonds qui manque le moins.",
          "Un riche Laboureur, sentant sa mort prochaine, fit venir ses enfants, leur parla sans t√©moins.",
          "Gardez-vous, leur dit-il, de vendre l'h√©ritage que nous ont laiss√© nos parents.",
          "Un tr√©sor est cach√© dedans.",
          "Je ne sais pas l'endroit ; mais un peu de courage vous le fera trouver, vous en viendrez √† bout.",
          "Remuez votre champ d√®s qu'on aura fait l'O√ªt.",
          "Creusez, fouillez, b√™chez ; ne laissez nulle place o√π la main ne passe et repasse.",
          "Le p√®re mort, les fils vous retournent le champ de√ß√†, del√†, partout ; si bien qu'au bout de l'an, il en rapporta davantage.",
          "D'argent, point de cach√©. Mais le p√®re fut sage de leur montrer avant sa mort que le travail est un tr√©sor."
        ]
      },
      {
        title: "La Cigale et la Fourmi",
        text: [
          "La Cigale, ayant chant√© tout l'√©t√©, se trouva fort d√©pourvue quand la bise fut venue.",
          "Pas un seul petit morceau de mouche ou de vermisseau.",
          "Elle alla crier famine chez la Fourmi sa voisine, la priant de lui pr√™ter quelque grain pour subsister jusqu'√† la saison nouvelle.",
          "¬´ Je vous paierai, lui dit-elle, avant l'ao√ªt, foi d'animal, int√©r√™t et principal. ¬ª",
          "La Fourmi n'est pas pr√™teuse : C'est l√† son moindre d√©faut.",
          "¬´ Que faisiez-vous au temps chaud ? ¬ª dit-elle √† cette emprunteuse.",
          "‚Äî Nuit et jour √† tout venant je chantais, ne vous d√©plaise.",
          "‚Äî Vous chantiez ? j'en suis fort aise ; eh bien dansez maintenant."
        ]
      }
    ];

    let currentDictationIndex = 0;
    let rate = 1;

    const userInput = document.getElementById("userInput");
    const feedback = document.getElementById("feedback");
    const select = document.getElementById("dictationSelect");

    function speak(text, rate = 1) {
      speechSynthesis.cancel();
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = "fr-FR";
      utterance.rate = rate;
      speechSynthesis.speak(utterance);
    }

    function playDictation() {
      const dictationText = dictations[currentDictationIndex].text.join(" ");
      speak(dictationText, rate);
    }

    function checkDictation() {
      const userText = userInput.value.trim().toLowerCase().replace(/[‚Äô']/g, "'");
      const correctText = dictations[currentDictationIndex].text.join(" ").toLowerCase().replace(/[‚Äô']/g, "'");
      const result = userText === correctText;

      feedback.innerHTML = result
        ? "‚úÖ Bravo ! Vous avez parfaitement recopi√© la dict√©e."
        : `‚ùå Erreurs d√©tect√©es.\n\nTexte attendu :\n"${dictations[currentDictationIndex].text.join(" ")}"`;
      feedback.style.color = result ? "#00e676" : "#ff5252";
    }

    document.getElementById("btnPlay").onclick = playDictation;
    document.getElementById("btnSlow").onclick = () => {
      rate = Math.max(0.5, rate - 0.25);
      playDictation();
    };
    document.getElementById("btnFast").onclick = () => {
      rate = Math.min(2, rate + 0.25);
      playDictation();
    };
    document.getElementById("btnCheck").onclick = checkDictation;
    select.onchange = () => {
      currentDictationIndex = parseInt(select.value);
      userInput.value = "";
      feedback.textContent = "";
    };
  </script>
</body>
</html>
