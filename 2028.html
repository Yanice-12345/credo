


<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dictée Interactive</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(270deg, #6a11cb, #2575fc, #6a11cb);
      background-size: 600% 600%;
      animation: gradientAnimation 15s ease infinite;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
    }

    @keyframes gradientAnimation {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    .container {
      background: rgba(255,255,255,0.1);
      padding: 30px;
      border-radius: 16px;
      max-width: 700px;
      width: 100%;
      text-align: center;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px rgba(0,0,0,0.25);
    }

    h1 {
      margin-bottom: 20px;
      font-size: 1.8rem;
    }

    select, textarea, button {
      width: 100%;
      margin-top: 12px;
      padding: 12px;
      font-size: 1rem;
      border-radius: 8px;
      border: none;
      outline: none;
    }

    textarea {
      height: 180px;
      resize: vertical;
      background: rgba(255,255,255,0.9);
      color: #333;
    }

    select {
      background: rgba(255,255,255,0.9);
      color: #333;
    }

    .buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 15px;
    }

    .buttons button {
      flex: 1 1 calc(50% - 10px);
      background: #fff;
      color: #2575fc;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }

    .buttons button:hover {
      background: #2575fc;
      color: #fff;
    }

    #result {
      margin-top: 15px;
      font-weight: bold;
      min-height: 1.2em;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>📜 Dictée Interactive</h1>

    <select id="dictationSelect">
      <option value="laboureur">Le Laboureur et ses enfants</option>
      <option value="cigale">La Cigale et la Fourmi</option>
      <option value="lievre">Le Lièvre et la grenouille</option>
      <option value="corbeau">Le Corbeau et le Renard</option>
      <option value="grenouille">La Grenouille et le Bœuf</option>
      <option value="fourmi">La Fourmi et la Sauterelle</option>
      <option value="tortue">La Tortue et le Lièvre</option>
      <option value="agneau">Le Loup et l’Agneau</option>
      <option value="Le Coq et le Renard"> Le Coq et le Renard</option>

<option value="poisson">Le Petit Poisson</option>
<option value="cheval">Le Cheval et l’Âne</option>
<option value="pluie">La Pluie et le Beau Temps</option>
<option value="chat">Le Chat et la Souris</option>
<option value="chene">Le Vieux Chêne</option>
<option value="marchand">Le Marchand et son Âne</option>
<option value="papillon">Le Papillon et la Fleur</option>
<option value="pluieEte">La Pluie d’Été</option>
<option value="foret">La Forêt Enchantée</option>
<option value="vent">Le Vent et les Feuilles</option>

    </select>

    <div class="buttons">
      <button onclick="playDictation()">▶️ Écouter</button>
      <button onclick="togglePause()">⏸️ Pause / Reprendre</button>
      <button onclick="slowDown()">🐢 Ralentir</button>
      <button onclick="speedUp()">🐇 Accélérer</button>
      <button onclick="checkDictation()">✅ Vérifier</button>
    </div>

    <textarea id="userInput" placeholder="Écris ici ta dictée..."></textarea>

    <div id="result"></div>
  </div>

  <script>
    const dictations = {
      laboureur: `Travaillez, prenez de la peine :
C'est le fonds qui manque le moins.
Un riche Laboureur, sentant sa mort prochaine,
Fit venir ses enfants, leur parla sans témoins.
Gardez-vous, leur dit-il, de vendre l'héritage
Que nous ont laissé nos parents.
Un trésor est caché dedans.
Je ne sais pas l'endroit ; mais un peu de courage
Vous le fera trouver, vous en viendrez à bout.
Remuez votre champ dès qu'on aura fait l'Oût.
Creusez, fouillez, bêchez ; ne laissez nulle place
Où la main ne passe et repasse...`,

      cigale: `La Cigale, ayant chanté Tout l’été, se trouva fort dépourvue
Quand la bise fut venue :
Pas un seul petit morceau
De mouche ou de vermisseau.
Elle alla crier famine
Chez la Fourmi sa voisine,
La priant de lui prêter
Quelque grain pour subsister
Jusqu’à la saison nouvelle
« Je vous paierai, lui dit-elle,
Avant l’août, foi d’animal,
Intérêt et principal. »
La Fourmi n’est pas prêteuse ;
C’est là son moindre défaut.
« Que faisiez-vous au temps chaud ?
Dit-elle à cette emprunteuse.
– Nuit et jour à tout venant
Je chantais, ne vous déplaise.
– Vous chantiez ? j’en suis fort aise :
Eh bien ! dansez maintenant. »`,

      lievre: `Tout le monde savait que le Lièvre était l'animal le plus rapide...
Un jour, le Lièvre proposa une course à la Tortue. La Chouette donna le départ.
Le Lièvre partit vite, s'arrêta pour dormir... et la Tortue gagna la course.`,

      tortue: `Un Lièvre en son gîte songeait
(Car que faire en un gîte, à moins que l’on ne songe ?) ;
Dans un profond ennui ce Lièvre se plongeait :
Cet animal est triste, et la crainte le ronge.
« Les gens de naturel peureux
Sont, disait-il, bien malheureux ;
Ils ne sauraient manger morceau qui leur profite,
Jamais un plaisir pur, toujours assauts divers.
Voilà comme je vis : cette crainte maudite
M’empêche de dormir, sinon les yeux ouverts.
– Corrigez-vous, dira quelque sage cervelle.
– Et la peur se corrige-t-elle ?
Je crois même qu’en bonne foi
Les hommes ont peur comme moi »
Ainsi raisonnait notre Lièvre,
Et cependant faisait le guet.
Il était douteux, inquiet :
Un souffle, une ombre, un rien, tout lui donnait la fièvre.
Le mélancolique animal,
En rêvant à cette matière,
Entend un léger bruit : ce lui fut un signal
Pour s’enfuir devers sa tanière.
Il s’en alla passer sur le bord d’un étang.
Grenouilles aussitôt de sauter dans les ondes,
Grenouilles de rentrer en leurs grottes profondes.
« Oh ! dit-il, j’en fais faire autant
Qu’on m’en fait faire ! Ma présence
Effraye aussi les gens, je mets l’alarme au camp !
Et d’où me vient cette vaillance ?
Comment ! des animaux qui tremblent devant moi !
Je suis donc un foudre de guerre ?
Il n’est, je le vois bien, si poltron sur la terre
Qui ne puisse trouver un plus poltron que soi. »`,

      corbeau: `Maître Corbeau, sur un arbre perché,
Tenait en son bec un fromage.
Maître Renard, par l’odeur alléché,
Lui tint à peu près ce langage :
« Hé ! bonjour, monsieur du Corbeau.
Que vous êtes joli ! que vous me semblez beau !
Sans mentir, si votre ramage
Se rapporte à votre plumage,
Vous êtes le phénix des hôtes de ces bois. »
À ces mots le Corbeau ne se sent pas de joie ;
Et pour montrer sa belle voix
Il ouvre un large bec, laisse tomber sa proie.
Le Renard s’en saisit, et dit : « Mon bon monsieur,
Apprenez que tout flatteur
Vit aux dépens de celui qui l’écoute :
Cette leçon vaut bien un fromage, sans doute. »
Le Corbeau, honteux et confus,
Jura, mais un peu tard, qu’on ne l’y prendrait plus.`,

      grenouille: `Une Grenouille vit un Bœuf
Qui lui sembla de belle taille.
Elle, qui n’était pas grosse en tout comme un œuf,
Envieuse, s’étend, et s’enfle et se travaille,
Pour égaler l’animal en grosseur ;
Disant : « Regardez bien, ma sœur ;
Est-ce assez ? dites-moi ; n’y suis-je point encore ?
– Nenni. – M’y voici donc ? – Point du tout. – M’y voilà ?
– Vous n’en approchez point. » La chétive pécore
S’enfla si bien qu’elle creva.
Le monde est plein de gens qui ne sont pas plus sages :
Tout bourgeois veut bâtir comme les grands seigneurs,
Tout petit prince a des ambassadeurs,
Tout marquis veut avoir des pages.`,

      fourmi: `Nous étions au milieu de l'hiver, un jour clair et glacial...
La Sauterelle affamée demanda des graines à la Fourmi,
Mais cette dernière lui répondit que ceux qui ne travaillent pas auront faim.`,

      agneau: `La raison du plus fort est toujours la meilleure :
Nous l’allons montrer tout à l’heure.
Un Agneau se désaltérait
Dans le courant d’une onde pure ;
Un Loup survient à jeun, qui cherchait aventure,
Et que la faim en ces lieux attirait.
« Qui te rend si hardi de troubler mon breuvage ?
Dit cet animal plein de rage :
Tu seras châtié de ta témérité.
– Sire, répond l’Agneau, que Votre Majesté
Ne se mette pas en colère ;
Mais plutôt qu’elle considère
Que je me vas désaltérant
Dans le courant,
Plus de vingt pas au-dessous d’elle ;
Et que par conséquent, en aucune façon,
Je ne puis troubler sa boisson.
– Tu la troubles, reprit cette bête cruelle ;
21
Et je sais que de moi tu médis l’an passé.
– Comment l’aurais-je fait si je n’étais pas né ?
Reprit l’Agneau, je tette encore ma mère
– Si ce n’est toi, c’est donc ton frère.
– Je n’en ai point. – C’est donc quelqu’un des tiens
Car vous ne m’épargnez guère,
Vous, vos bergers et vos chiens.
On me l’a dit : il faut que je me venge. »
Là-dessus, au fond des forêts
Le Loup l’emporte et puis le mange,
Sans autre forme de procès.`,

      Le Coq et le Renard: `Sur la branche d’un arbre était en sentinelle
Un vieux Coq adroit et matois.
« Frère, dit un Renard, adoucissant sa voix,
Nous ne sommes plus en querelle :
Paix générale cette fois.
Je viens te l’annoncer, descends, que je t’embrasse.
Ne me retarde point, de grâce ;
Je dois faire aujourd’hui vingt postes sans manquer.
Les tiens et toi pouvez vaquer,
Sans nulle crainte, à vos affaires ;
Nous vous y servirons en frères.
Faites-en les feux dès ce soir,
Et cependant, viens recevoir
Le baiser d’amour fraternel.
– Ami, reprit le Coq, je ne pouvais jamais
Apprendre une plus douce et meilleure nouvelle
Que celle
De cette paix ;
Et ce m’est une double joie
73
De la tenir de toi. Je vois deux lévriers,
Qui, je m’assure, sont courriers
Que pour ce sujet on m’envoie.
Ils vont vite, et seront dans un moment à nous
Je descends : nous pourrons nous entre-baiser tous.
– Adieu, dit le Renard, ma traite est longue à faire :
Nous nous réjouirons du succès de l’affaire
Une autre fois. » Le galant aussitôt
Tire ses grègues, gagne au haut,
Mal content de son stratagème.
Et notre vieux coq en soi-même
Se mit à rire de sa peur ;
Car c’est double plaisir de tromper le trompeur.`




poisson: `Un petit poisson nageait dans la rivière claire.
Il aimait jouer parmi les algues et les pierres. Un jour, il rencontra une grenouille qui sautait joyeusement sur la berge. « Bonjour, petit poisson, veux-tu jouer avec moi ? » demanda la grenouille. Le poisson fit un petit saut et accepta avec plaisir.`,
cheval: Un cheval et un âne travaillaient ensemble dans un champ. Le cheval tirait la charrue tandis que l’âne portait les sacs de graines. Un jour, l’âne dit au cheval : « Tu travailles trop dur, laisse-moi t’aider davantage. » Le cheval répondit : « Ensemble, nous pouvons tout accomplir. » Depuis ce jour, ils travaillaient en équipe et étaient très heureux.,
pluie: La pluie tombait doucement sur le jardin. Les fleurs buvaient l’eau avec joie. Puis, le beau temps revint avec un grand soleil. Les oiseaux chantaient et les enfants jouaient dehors. La pluie et le soleil se succédaient pour rendre la nature belle.,
chat: Un chat gris regardait une petite souris courir vite. La souris cherchait du fromage près de la porte. Le chat voulut attraper la souris, mais elle était trop rapide. Finalement, le chat se fatigua et laissa la souris partir. La souris s’enfuit, heureuse d’avoir échappé au chat.,
chene: Un vieux chêne se dressait au milieu du champ. Il avait des branches larges et des feuilles vertes. Les enfants aimaient jouer à l’ombre de ce chêne. Un jour, une tempête forte fit tomber une branche. Mais le vieux chêne resta fier et solide malgré les années.,
marchand: Un marchand avait un âne fidèle qui l’aidait à porter ses marchandises. Chaque jour, ils traversaient le village ensemble. Un matin, l’âne tomba dans un fossé profond. Le marchand chercha de l’aide pour le sauver. Finalement, l’âne fut tiré hors du trou, et tous deux reprirent leur chemin.,
papillon: Un joli papillon coloré voletait autour d’une fleur. Il butinait le nectar avec délicatesse. La fleur s’ouvrait sous le soleil chaud de l’été. Le papillon dansait de fleur en fleur, heureux. Ils vivaient une belle histoire de nature et de beauté.,

pluieEte: La pluie d’été tombe souvent en fin d’après-midi. Elle rafraîchit les champs et les jardins. Les enfants aiment sauter dans les flaques d’eau. Après la pluie, un arc-en-ciel apparaît dans le ciel bleu. La nature remercie la pluie qui fait tout grandir.,

foret: Dans une forêt enchantée, les arbres parlaient aux voyageurs. Les animaux y vivaient en paix et en harmonie. Un petit garçon s’aventura dans cette forêt magique. Il rencontra une fée qui lui offrit un cadeau merveilleux. Il rentra chez lui avec un cœur rempli de joie.,

vent: Le vent soufflait fort dans les arbres du parc. Les feuilles rouges et jaunes tourbillonnaient dans l’air. Elles dansaient une danse folle avant de tomber au sol. Le vent riait en emportant les feuilles au loin. C’était l’arrivée de l’automne, saison des couleurs chaudes.,
    };


    let rate = 0.5;
    const minRate = 0.25;
    const maxRate = 2.0;
    let paused = false;
    let speaking = false;
    let queue = [];
    let voice = null;

    function getVoice() {
      const voices = speechSynthesis.getVoices();
      // On garde la même voix dans la variable globale
      if (!voice) {
        voice = voices.find(v => v.lang === 'fr-FR' && /thomas|paul|yves|homme/i.test(v.name)) || voices.find(v => v.lang === 'fr-FR');
      }
      return voice;
    }

    function speak(text) {
      speechSynthesis.cancel();
      queue = [];

      // Découpe en parties mots/ponctuations
      const parts = text
        .replace(/\n/g, ' ')
        .split(/([.,;:!?])/g)
        .filter(p => p.trim() !== '');

      for (let part of parts) {
        // Création de l'énoncé à lire
        let utterance = null;
        if (['.', ',', ';', ':', '!', '?'].includes(part)) {
          // On lit la ponctuation sous forme orale (optionnel)
          // ou on peut ne rien lire et juste faire pause
          utterance = new SpeechSynthesisUtterance(part); 
          utterance.lang = 'fr-FR';
          utterance.voice = getVoice();
          utterance.rate = rate;
          // Marque cette utterance comme ponctuation pour pause plus longue
          utterance.isPunctuation = true;
        } else {
          utterance = new SpeechSynthesisUtterance(part.trim());
          utterance.lang = 'fr-FR';
          utterance.voice = getVoice();
          utterance.rate = rate;
          utterance.isPunctuation = false;
        }
        queue.push(utterance);
      }

      speaking = true;
      playQueue();
    }

    async function playQueue() {
      for (let utterance of queue) {
        while (paused) await new Promise(r => setTimeout(r, 100));
        if (!speaking) return;

        speechSynthesis.speak(utterance);
        await new Promise(resolve => {
          utterance.onend = resolve;
        });

        // Pause de 5 secondes après une ponctuation, sinon pause de 0.5s
        if (utterance.isPunctuation) {
          await new Promise(r => setTimeout(r, 5000)); 
        } else {
          await new Promise(r => setTimeout(r, 500));
        }
      }
      speaking = false;
    }

    function playDictation() {
      const selected = document.getElementById('dictationSelect').value;
      const text = dictations[selected];
      if (text) {
        paused = false;
        speaking = true;
        speak(text);
      }
    }

    function togglePause() {
      paused = !paused;
      if (paused) {
        speechSynthesis.pause();
      } else {
        speechSynthesis.resume();
      }
    }

    function slowDown() {
      if (rate > minRate) {
        rate -= 0.1;
        if (rate < minRate) rate = minRate;
      }
    }

    function speedUp() {
      if (rate < maxRate) {
        rate += 0.1;
        if (rate > maxRate) rate = maxRate;
      }
    }

    function checkDictation() {
      const selected = document.getElementById('dictationSelect').value;
      const original = dictations[selected].replace(/\s+/g, ' ').trim();
      const userText = document.getElementById('userInput').value.replace(/\s+/g, ' ').trim();

      const isExact = original.toLowerCase() === userText.toLowerCase();

      const result = isExact
        ? '✅ Parfait ! Aucune erreur détectée.'
        : '❌ Il y a des différences. Relis ta dictée et réessaie !';

      document.getElementById('result').textContent = `${result}\n\n--- Dictée originale ---\n${original}`;
    }

    window.speechSynthesis.onvoiceschanged = () => {
      getVoice();
    };
  </script>
</body>
</html>
