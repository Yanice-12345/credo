<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Dict√©e ‚Äì La Fontaine</title>
  <style>
    body {
      background: linear-gradient(270deg, #8e44ad, #3498db);
      background-size: 600% 600%;
      animation: gradientBG 15s ease infinite;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      color: #fff;
    }

    @keyframes gradientBG {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    .container {
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
      padding: 30px;
      border-radius: 20px;
      max-width: 700px;
      width: 90%;
      text-align: center;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 20px;
    }

    #phrase {
      font-size: 1.3rem;
      margin: 15px 0;
      min-height: 50px;
    }

    input[type="text"] {
      width: 100%;
      padding: 15px;
      font-size: 1.1rem;
      border-radius: 8px;
      border: none;
      outline: none;
      margin-bottom: 15px;
    }

    .buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }

    button {
      padding: 10px 20px;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      background: #fff;
      color: #3498db;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background: #3498db;
      color: #fff;
    }

    #feedback {
      margin-top: 20px;
      font-weight: bold;
      font-size: 1.2rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Dict√©e ‚Äì Fables de La Fontaine</h1>
    <div id="phrase">Cliquez sur "Jouer" pour commencer</div>
    <input type="text" id="userInput" placeholder="Recopiez la dict√©e ici..." />
    <div class="buttons">
      <button id="btnPlay">‚ñ∂Ô∏è Jouer</button>
      <button id="btnRepeat">üîÅ R√©p√©ter</button>
      <button id="btnSlow">üê¢ Ralentir</button>
      <button id="btnFast">üêá Acc√©l√©rer</button>
      <button id="btnNext">‚è≠ Suivant</button>
      <button id="btnBack">‚¨ÖÔ∏è Retour</button>
    </div>
    <div id="feedback"></div>
  </div>

  <script>
    const dictation = [
      // Le Laboureur et ses enfants
      "Travaillez, prenez de la peine : C'est le fonds qui manque le moins.",
      "Un riche Laboureur, sentant sa mort prochaine, fit venir ses enfants, leur parla sans t√©moins.",
      "Gardez-vous, leur dit-il, de vendre l'h√©ritage que nous ont laiss√© nos parents.",
      "Un tr√©sor est cach√© dedans.",
      "Je ne sais pas l'endroit ; mais un peu de courage vous le fera trouver, vous en viendrez √† bout.",
      "Remuez votre champ d√®s qu'on aura fait l'O√ªt.",
      "Creusez, fouillez, b√™chez ; ne laissez nulle place o√π la main ne passe et repasse.",
      "Le p√®re mort, les fils vous retournent le champ de√ß√†, del√†, partout ; si bien qu'au bout de l'an, il en rapporta davantage.",
      "D'argent, point de cach√©. Mais le p√®re fut sage de leur montrer avant sa mort que le travail est un tr√©sor.",
      
      // La Cigale et la Fourmi
      "La Cigale, ayant chant√© tout l'√©t√©, se trouva fort d√©pourvue quand la bise fut venue.",
      "Pas un seul petit morceau de mouche ou de vermisseau.",
      "Elle alla crier famine chez la Fourmi sa voisine, la priant de lui pr√™ter quelque grain pour subsister jusqu'√† la saison nouvelle.",
      "¬´ Je vous paierai, lui dit-elle, avant l'ao√ªt, foi d'animal, int√©r√™t et principal. ¬ª",
      "La Fourmi n'est pas pr√™teuse : C'est l√† son moindre d√©faut.",
      "¬´ Que faisiez-vous au temps chaud ? ¬ª dit-elle √† cette emprunteuse.",
      "‚Äî Nuit et jour √† tout venant je chantais, ne vous d√©plaise.",
      "‚Äî Vous chantiez ? j'en suis fort aise ; eh bien dansez maintenant."
    ];

    let currentIndex = 0;
    let rate = 1;
    const phraseDisplay = document.getElementById("phrase");
    const userInput = document.getElementById("userInput");
    const feedback = document.getElementById("feedback");

    function speak(text, rate = 1) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = "fr-FR";
      utterance.rate = rate;
      speechSynthesis.cancel();
      speechSynthesis.speak(utterance);
    }

    function showPhrase() {
      const phrase = dictation[currentIndex];
      phraseDisplay.textContent = `Phrase ${currentIndex + 1} sur ${dictation.length}`;
      userInput.value = "";
      userInput.focus();
      feedback.textContent = "";
      speak(phrase, rate);
    }

    function checkPhrase() {
      const userText = userInput.value.trim().toLowerCase();
      const correctText = dictation[currentIndex].toLowerCase().replace(/[‚Äô']/g, "'");
      
      if (userText === correctText) {
        feedback.textContent = "‚úÖ Bravo ! C'est exact.";
        feedback.style.color = "#00e676";
      } else {
        feedback.textContent = `‚ùå Erreur. Attendu : "${dictation[currentIndex]}"`;
        feedback.style.color = "#ff5252";
      }
    }

    document.getElementById("btnPlay").onclick = showPhrase;
    document.getElementById("btnRepeat").onclick = () => speak(dictation[currentIndex], rate);
    document.getElementById("btnSlow").onclick = () => {
      rate = Math.max(0.5, rate - 0.25);
      speak(dictation[currentIndex], rate);
    };
    document.getElementById("btnFast").onclick = () => {
      rate = Math.min(2, rate + 0.25);
      speak(dictation[currentIndex], rate);
    };
    document.getElementById("btnNext").onclick = () => {
      if (currentIndex < dictation.length - 1) {
        currentIndex++;
        showPhrase();
      }
    };
    document.getElementById("btnBack").onclick = () => {
      if (currentIndex > 0) {
        currentIndex--;
        showPhrase();
      }
    };

    userInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        checkPhrase();
      }
    });

    // Optionnel : d√©marrer √† l'ouverture
    window.addEventListener("load", () => {
      showPhrase();
    });
  </script>
</body>
</html>
