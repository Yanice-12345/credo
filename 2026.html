<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Module √âpellation Vocale - Liste Compl√®te</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }
  .container {
    background: rgba(255,255,255,0.1);
    padding: 30px 40px;
    border-radius: 15px;
    box-shadow: 0 8px 32px 0 rgba(31,38,135,0.37);
    width: 90%;
    max-width: 480px;
    text-align: center;
    backdrop-filter: blur(8px);
  }
  h1 {
    margin-bottom: 20px;
    font-weight: 700;
    text-shadow: 0 2px 5px rgba(0,0,0,0.3);
  }
  #wordDisplay {
    font-size: 2.3rem;
    font-weight: 700;
    margin-bottom: 25px;
    letter-spacing: 0.12em;
    min-height: 48px;
  }
  input[type="text"] {
    font-size: 1.5rem;
    padding: 12px 15px;
    width: 100%;
    border-radius: 10px;
    border: none;
    outline: none;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
    margin-bottom: 20px;
    color: #333;
    background-color: #fff;
    caret-color: #2575fc;
    autocorrect: off;
    autocomplete: off;
    spellcheck: false;
  }
  input[type="text"]::-webkit-autofill,
  input[type="text"]::-webkit-autofill:hover,
  input[type="text"]::-webkit-autofill:focus {
    box-shadow: 0 0 0px 1000px white inset !important;
    -webkit-text-fill-color: #333 !important;
  }
  .buttons {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 15px;
  }
  button {
    flex: 1 1 40%;
    padding: 12px 10px;
    font-size: 1.1rem;
    font-weight: 600;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    color: #2575fc;
    background-color: #fff;
    transition: background-color 0.3s, color 0.3s;
    user-select: none;
  }
  button:hover:not(:disabled) {
    background-color: #2575fc;
    color: #fff;
  }
  button:disabled {
    opacity: 0.5;
    cursor: default;
  }
  #message {
    margin-top: 20px;
    min-height: 28px;
    font-size: 1.3rem;
    font-weight: 600;
    text-shadow: 0 0 8px rgba(0,0,0,0.15);
    min-height: 32px;
  }
</style>
</head>
<body>
  <div class="container" role="main" aria-label="Module d'√©pellation vocale">
    <h1>√âpellation vocale</h1>
    <div id="wordDisplay" aria-live="polite" aria-atomic="true">Mot √† √©couter</div>
    <input
      type="text"
      id="answer"
      placeholder="√âcris le mot ici..."
      autocorrect="off"
      autocomplete="off"
      spellcheck="false"
      aria-label="Saisie du mot"
      autofocus
    />
    <div class="buttons">
      <button id="btnPlay" aria-label="Jouer le mot">‚ñ∂Ô∏è Jouer</button>
      <button id="btnSlow" aria-label="Ralentir la lecture">üê¢ Ralentir</button>
      <button id="btnFast" aria-label="Acc√©l√©rer la lecture">üêá Acc√©l√©rer</button>
      <button id="btnRepeat" aria-label="R√©p√©ter le mot">üîÅ R√©p√©ter</button>
      <button id="btnSkip" aria-label="Passer le mot">‚è≠ Passer</button>
    </div>
    <div id="message" aria-live="assertive" aria-atomic="true"></div>
  </div>

<script>
  const words = [
    "autel","bataille","ch√¥mage","documentaire","√©tang","force","gazouiller","hache",
    "atome","bibliographie","crustac√©","documentaliste","√©rosion","fantastique","gam√®te","hormone",
    "altercation","bip√®de","conductible","dictionnaire","√©tiquette","fant√¥me","gyn√©cologue","herbivore",
    "acide","bourgeon","croquis","d√©limitation","√©cart","format","gentiment","harmonieux",
    "amplitude","bidonville","cylindre","descendre","√©paisseur","fonctionnement","gabarit","hypoth√®se",
    "analogie","bissectrice","contrebasse","dent","√©go√Øste","fr√©tiller","galanterie","hypermarch√©",
    "ant√©c√©dent","bissextile","cyclope","d√©soler","√©quilat√©ral","faillite","g√¢chis","humanit√©",
    "anaphore","bouillir","cellule","dispara√Ætre","expression","facturation","gangr√®ne","hippopotame",
    "antipathie","botanique","cancer","dollar","esquisse","fluidifier","galipette","hirondelle",
    "arch√©ologie","bonheur","c√¢ble","doigt","emprunt","f≈ìtus","gargouiller","heurter",
    "anticorps","banquette","chronologie","d√©esse","enceinte","fanfare","garde-robe","honn√™tet√©",
    "anatomie","bient√¥t","compas","devis","√©lectron","fertilit√©","gencive",
    "aquatique","bicyclette","calomnie","d√©duction","√©clipse","furieux","g√©n√©ralement","illustrateur",
    "anecdote","bapt√™me","chorale","d√©veloppement","euphorie","frayeur","gentillesse","inflation",
    "abonnement","b√©gayer","corail","diff√©remment","euph√©misme","fugitif","ghetto","impersonnel",
    "absence","barbecue","concentration","d√©gradation","extinction","fraiseuse","glaciaire","isoloir",
    "abr√©ger","bact√©rie","carambolage","discriminatoire","√©querre","fabuleux","index",
    "abyme","bracelet","concubin","diff√©rencier","√©bauche","fain√©ant","harceler","int√©rieur",
    "accueil","boulang√®re","conteneur","d√©localisation","√©b√®ne","faisable","happer","industrie",
    "actuellement","br√ªler","cadenasser","d√©mangeaison","√©pith√®te","falsifier","handicap","impression",
    "adh√©sion","baroque","chromosome","dilemme","estomac","favoritisme","homog√®ne","insecte",
    "agenda","boulevard","compas","d√©sarroi","√©pilogue","humain","information",
    "affliger","banquise","circonflexe","dinosaure","√©picentre","g√©ologue","harpie","indigo",
    "all√©gorie","bourgeonner","contraception","dissolution","effigie","gestionnaire","hamster","intol√©rance",
    "anesth√©sie","bain-marie","contemporain","d√©magogie","embo√Æter","gouache","humain","infinitif",
    "antiquaire","bafouer","commettre","douillet","√©carquiller","gravitation","hectare","inondation",
    "apostrophe","barrette","coefficient","droiture","graffiti","hypot√©nuse","induction",
    "appara√Ætre","boycotter","confidentialit√©","dubitatif","f√©condation","g√©ant","hauteur","impulsion",
    "agglom√©ration","bouilloire","caoutchouc","durablement","fr√©quence","gestion","horticulture","int√©ressant"
  ];

  let currentIndex = 0;
  let synth = window.speechSynthesis;
  let utterance;
  let playingRate = 1;
  const wordDisplay = document.getElementById("wordDisplay");
  const answerInput = document.getElementById("answer");
  const message = document.getElementById("message");
  const btnPlay = document.getElementById("btnPlay");
  const btnSlow = document.getElementById("btnSlow");
  const btnFast = document.getElementById("btnFast");
  const btnRepeat = document.getElementById("btnRepeat");
  const btnSkip = document.getElementById("btnSkip");

  // Pr√©pare la voix fran√ßaise la plus adapt√©e
  let frenchVoice = null;
  function selectFrenchVoice() {
    const voices = synth.getVoices();
    frenchVoice = voices.find(v => v.lang.startsWith('fr')) || voices[0];
  }
  if (synth.onvoiceschanged !== undefined) {
    synth.onvoiceschanged = selectFrenchVoice;
  }
  selectFrenchVoice();

  function speak(text, rate = playingRate, callback) {
    if (synth.speaking) synth.cancel();
    utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = frenchVoice.lang || "fr-FR";
    utterance.voice = frenchVoice;
    utterance.rate = rate;
    utterance.onend = () => {
      if (callback) callback();
    };
    synth.speak(utterance);
  }

  function playCurrentWord() {
    if (currentIndex >= words.length) {
      finishSession();
      return;
    }
    wordDisplay.textContent = "";
    message.textContent = "√âcoutez attentivement...";
    answerInput.value = "";
    answerInput.focus();
    speak(words[currentIndex]);
  }

  function playCurrentWordSlow() {
    playingRate = 0.6;
    playCurrentWord();
  }
  function playCurrentWordFast() {
    playingRate = 1.6;
    playCurrentWord();
  }
  function repeatWord() {
    if (currentIndex >= words.length) return;
    speak(words[currentIndex]);
  }

  function checkAnswer() {
    if (currentIndex >= words.length) return;
    const userInput = answerInput.value.trim().toLowerCase();
    const correctWord = words[currentIndex].toLowerCase();

    if (!userInput) {
      message.textContent = "Veuillez √©crire le mot.";
      return;
    }

    if (userInput === correctWord) {
      message.textContent = "‚úÖ Correct ! Mot suivant...";
      currentIndex++;
      setTimeout(() => {
        if (currentIndex < words.length) {
          playCurrentWord();
        } else {
          finishSession();
        }
      }, 1200);
    } else {
      message.textContent = "‚ùå Incorrect, √©coutez l'√©pellation...";

      // √âpellation lettre par lettre √† vitesse lente
      const letters = correctWord.split("");
      let i = 0;

      function spellLetter() {
        if (i < letters.length) {
          speak(letters[i], 0.8, () => {
            i++;
            setTimeout(spellLetter, 350);
          });
        } else {
          message.textContent = "Essayez encore, ou passez le mot.";
        }
      }
      spellLetter();
    }
  }

  function nextWord() {
    currentIndex++;
    if (currentIndex >= words.length) {
      finishSession();
    } else {
      playCurrentWord();
    }
  }

  function finishSession() {
    wordDisplay.textContent = "üëç Fin de la liste.";
    message.textContent = "Bravo, vous avez termin√© la liste compl√®te.";
    answerInput.disabled = true;
    btnPlay.disabled = true;
    btnSlow.disabled = true;
    btnFast.disabled = true;
    btnRepeat.disabled = true;
    btnSkip.disabled = true;
  }

  // √âv√©nements des boutons
  btnPlay.addEventListener("click", () => {
    playingRate = 1;
    playCurrentWord();
  });
  btnSlow.addEventListener("click", playCurrentWordSlow);
  btnFast.addEventListener("click", playCurrentWordFast);
  btnRepeat.addEventListener("click", repeatWord);
  btnSkip.addEventListener("click", () => {
    message.textContent = "Mot pass√©, √©coutez le suivant.";
    nextWord();
  });

  answerInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      e.preventDefault();
      checkAnswer();
    }
  });

  // Lancer le premier mot au chargement
  window.onload = () => {
    playCurrentWord();
  };
</script>
</body>
</html>
